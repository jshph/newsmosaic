<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet/less" type="text/css" href="styles.less"/>
    <script type="text/javascript" src="less.min.js"></script>
</head>
<body>


<!-- <div class="hex">
    <div class="left"></div>
    <div class="middle"></div>
    <div class="right"></div> 
    <div id="keywords">
    </div>
</div> -->

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {

var words = ['trump', 'candidate', '2016 presidential race', 'polls', 'republican'];
var FONT_MAXSIZE = 12;

for (var i = 0; i < 3; i++) {
    var newRow = document.createElement('div');
    $(newRow).addClass('hex-row');
    for (var j = 0; j < 7; j++) {
        var newHex = document.createElement('div');
        $(newHex).html('<div class="left"></div><div class="middle"></div><div class="middle middle-shade"></div><div class="right"></div>'); //hexagon geometry
        $(newHex).addClass('hex');
        if (j % 2 == 0) $(newHex).addClass('even');

        $kw = $(document.createElement('div')).addClass('keywords');
        renderWords($kw);
        $(newHex).append($kw);
        $(newHex).appendTo($(newRow));
    }
    $(newRow).appendTo($('body'));
}

function renderWords($kw) {

words.forEach(function(word, index) {
    var line = document.createElement('p');
    var fontSize = FONT_MAXSIZE - Math.abs(Math.floor(words.length/2) - index) * 3;

    $(line).text(word);
    $(line).css('font-size', fontSize + 'pt');
    $kw.append($(line));
});

function rotateWords() {
    var $pChildren = $kw.children('p');

    var first = $pChildren.first();
    var tmp = first.clone()

    var firstRemoved = false;
    $pChildren.each(function(index, word) {
        $(word).animate({
            marginTop: - FONT_MAXSIZE/2.5 + 'pt',
            fontSize: FONT_MAXSIZE - Math.abs(Math.floor(words.length/2) - index + 1) * 3.5 + 'pt'
        }, 1000, function() {
            if (!firstRemoved) {
                first.remove();
                $kw.append(tmp);
                rotateWords();
                firstRemoved = true;
            }
            $(word).css({'margin-top': '0pt'});
        });
    });
}

rotateWords();

}

});

</script>
</body>
</html>